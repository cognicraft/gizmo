<gizmo-link>
    <span class="link">
        <a href={transform(opts.data.href)} onclick={load}><gizmo-icon type={'link:'+opts.data.rel} size="tiny"/>{opts.data.label || opts.data.rel}</a>
    </span>
    <style scoped>
        a {
            color: inherit;
            text-decoration: none;
        }
        gizmo-icon{
            margin-right: .5em;
            vertical-align: top;
        }
    </style>
    <script>
        this.transform = function(url){
            if (!url){
                return '#';
            }
            if (url.startsWith('http://')){
                return '#/n/'+ url.substr(7);
            } 
            if (url.startsWith('https://')) {
                return '#/s/'+ url.substr(8);
            }
            return url;
        };
        this.load = function(e){
            let reload = (e.toElement.href == window.location.href); 
            if (reload){
                window.dispatchEvent(new HashChangeEvent("hashchange"));
            }
        };
    </script>
</gizmo-link>